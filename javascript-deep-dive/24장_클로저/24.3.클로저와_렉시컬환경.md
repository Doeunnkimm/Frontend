## 24.3 클로저와 렉시컬 환경

```js
const x = 1

// 1
function outer() {
    const x = 10
    const inner = function () { console.log(x) } // 2
    return inner
}

// outer 함수를 호출하면 중첩 함수 inner를 반환한다.
// 그리고 outer 함수의 실행 컨텍스트는 실행 컨텍스트 스택에서 팝되어 제거된다.
const innerFunc = outer() // 3
innerFunc()
```

- outer 함수를 호출(3)하면 outer 함수는 중첩 함수 inner를 반환하고 생명 주기를 마감
- 즉, outer 함수의 실행이 종료되면 outer 함수의 실행 컨텍스트는 실행 컨텍스트 스택에서 제거
- 이때 outer 함수의 지역 변수 x와 변수 값 10을 저장하고 있던 outer 함수의 실행 컨텍스트가 제거되었으므로 outer 함수의 지역 변수 x 또한 생명주기를 마감한다.
- 따라서 outer 함수의 지역 변수 x는 더는 유효x
- 그러나 위 코드의 실행 결과(4)는 outer 함수의 지역 변수 x의 값인 10
- 이미 생명주기가 종료되어 실행 컨텍스트 스택에서 제거된 outer 함수의 지역 변수 x가 다시 부활이라도 한 듯이 동작하고 있다.

```
💡 외부 함수보다 중첩 함수가 더 오래 유지되는 경우
   중첩 함수는 이미 생명 주기가 종료한 외부 함수의 변수를 참조 가능

   → 이러한 중첩 함수를 클로저라고 부른다.
```

- outer 함수의 실행 컨텍스트는 실행 컨텍스트 스택에서 제거되지만 outer 함수의 렉시컬 환경까지 소멸하는 것은 아니다.