## 42.2 이벤트 루프와 태스크 큐

- 많은 태스크가 동시에 처리되는 것처럼 느껴지는 것은, **이벤트 루프** 덕분

**콜 스택(call stack)**

- 소스 코드 평가 과정에서 생성된 실행 컨텍스트가 추가되고 제거되는 스택 자료구인 실행 컨택스트 스택이 바로 콜 스택
- 함수를 호출하면, 함수 실행 컨텍스트가 순차적으로 콜 스택에 푸시되어 순차적으로 실행
- 최상위 실행 컨텍스트가 종료되어 콜 스택에서 제거되기 전까지는 다른 어떤 태스크도 실행 X

**힙(heap)**

- 힙은 객체가 저장되는 메모리 공간
- 콜 스택의 요소인 실행 컨텍스트는 힙에 저장된 객체를 참조
- 메모리에 값을 저장하려면 먼저 값을 저장할 메모리 공간의 크기를 결정해야 한다.
- 객체가 저장되는 메모리 공간의 힙은 구조화되어 있지 않다는 특징

```
⭐️ 비동기 처리에서 소스코드의 평가와 실행을 제외한 모든 처리는 브라우저 또는 Node.js가 담당
```

- 브라우저 환경은 태스크 큐와 이벤트 루프를 제공

**태스크 큐(task queue/event queue/callback queue)**

- `setTimeout`이나 `setInterval`과 같은 비동기 함수의 콜백 함수 또는 이벤트 핸들러가 일시적으로 보관되는 영역
- 태스트 큐와는 별도로 프로미스의 후속 처리 메서드의 콜백 함수가 일시적으로 보관되는 마이크로태스크 큐도 존재

**이벤트 루프(event loop)**

- 이벤트 루프는 콜 스택에 현재 실행 중인 실행 컨텍스트가 있는지
- 그리고 태스크 큐에 대기 중인 함수가 있는지 반복해서 확인