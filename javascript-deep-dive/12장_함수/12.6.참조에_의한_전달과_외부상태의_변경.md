## 12.6 참조에 의한 전달과 외부 상태의 변경

- 함수를 호출하면서 매개변수에 값을 전달하는 방식을 값에 의한 호출, 참조에 의한 호출로 구별해 부르는 경우도 있으나 동작 방식은 값에 의한 전달, 참조에 의한 전달과 동일

```js
// 매개변수 primitive는 원시 값을 전달받고, 매개변수 obj는 객체로 전달받는다.
function changeVal(primitive, obj) {
    primitive += 100
    obj.name = 'Kim'
}

// 외부 상태
var num = 100
var person = { name: 'Lee' }

// 원시 값은 값 자체가 복사되어 전달되고 객체는 참조 값이 복사되어 전달된다.
changeVal(num, person)
console.log(num) // 100 (원본 훼손 X)
console.log(person) // { name: 'Kim' } (원본 훼손 O)
```

- 이러한 문제의 해결 방법 중 하나는 객체를 불변 객체로 만들어 사용하는 것
- 객체의 복사본을 새롭게 생성하는 비용은 들지만 객체를 마지 원시 값처럼 변경 불가능한 값으로 동작하게 만드는 것
- 이를 통해 객체의 상태 변경을 원천봉쇄, 객체의 상태 변경이 필요한 경우에는 객체의 방어적 복사를 통해 원본 객체를 완전히 복제, 즉 깊은 복사를 통해 새로운 객체를 생성하고 재할당하여 교체
- 이를 통해 외부 상태가 변경되는 부수 효과를 없앨 수 있다.