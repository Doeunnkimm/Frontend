## 통합 테스트 대상 선정하기

- 통합 테스트에서는 구성된 비즈니스 로직을 적절한 단위로 나눠 컴포넌트 집합을 검증해야 한다.
- 비즈니스 로직을 기준으로 통합 테스트를 나눌 때는
  - 가능한 한 모킹을 하지 않고 실제와 유사하게 검증한다.
  - 비즈니스 로직을 처리하는 상태 관리나 API 호출은 상위 컴포넌트로 응집한다.
  - 변경 가능성을 고려해 여러 도메인의 기능이 조합된 비즈니스 로직은 나눠 검증한다
- 이를 통해 컴포넌트 간 결합도를 낮추고 견고한 설계를 통해 유지 보수하기 좋은 코드를 작성할 수 있다.

## 상태 관리 모킹하기

**상태 관리와 통합 테스트**

- 예제에서는 `zustand`를 사용하여 앱의 상태를 관리
- 원하는 상태로 통합 테스트를 하기 위해 zustand 모킹 필요
  - ex) 장바구니에 상품이 담긴 상태

**앱의 전역 상태를 모킹해 테스트 전/후에 값을 변경하고 초기화해야 한다**

- `__mocks/zustand.js`를 통해 자동 모킹을 적용해 스토어를 초기화하자
- `mockZustandStore`의 유틸 함수를 통한 `zustand` 스토어의 상태 변경
- React Redux나 Recoil과 같은 상태 관리 라이브러리도 모킹 가이드를 제공

**ProductInfoTable 통합 테스트**

- cart, user 스토어 + ProductInfoTableRow(MUI)가 결합된 컴포넌트
- ProductInfoTable과 같은 컴포넌트에 state와 API에 대한 제어 코드를 응집해 관리하는 것이 좋다.
  - 로직 파악 및 유지 보수에 좋으며, 통합 테스트의 단위를 깔금하게 나눌 수 있다.
- 비즈니스 로직을 실제 사용성과 유사하도록 사용자 인터랙션을 통해 컴포넌트 통합 테스트로 검증할 수 있다.
