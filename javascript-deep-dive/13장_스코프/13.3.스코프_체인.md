## 13.3 스코프 체인

- 함수는 전역에서 정의할 수도 있고 함수 몸체 내부에서 정의할 수도 있다.
- 함수 몸체 내부에서 함수가 정의된 것을 함수의 중첩이라고 한다.
- 함수는 중첩될 수 있으므로 함수의 지역 스코프도 중첩될 수 있다.

```
💡 스코프가 함수의 중첩에 의해 계층적 구조를 갖는다
```

<p align="center"><img src="https://velog.velcdn.com/images/jaeochoiii/post/5e1c1a08-a399-4b95-992a-86b1f4da754a/image.png" width="150"/></p>

- 이처럼 모든 스코프는 하나의 계층적 구조로 연결
- 모든 지역 스코프의 최상위 스코프는 전역 스코프

```
💡 변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는
   코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.
```

### 스코프 체인에 의한 함수 검색

다음 예제를 살펴보자. 전역에서 정의된 foo 함수와 bar 함수 내부에서 정의된 foo 함수가 있다.

```js
// 전역 함수
function foo() {
    console.log('global function foo')
}

function bar() {
    // 중첩 함수
    function foo() {
        console.log('local function foo')
    }

    foo() // 1
}

bar()
```

- 함수 선언문으로 함수를 정의하면 런타임 이전에 함수 객체가 먼저 생성
- 그리고 자바스크립트 엔진은 함수 이름과 동일한 이름의 식별자를 암묵적으로 선언하고 생성된 함수 객체를 할당
- 1에서 foo 함수를 호출하면 자바스크립트 엔진은 함수를 호출하기 위해 먼저 함수를 가리키는 식별자 foo를 검색한다.
- 이처럼 함수도 식별자에 할당되기 때문에 스코프를 갖는다.

```
💡 함수도 식별자에 할당되기 때문에 스코프를 갖는다.
```